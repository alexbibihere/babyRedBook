# 🚀 一键自动采集所有笔记(无需重复操作)

## ⚡ 超简单!只需 3 步:

### 第 1 步:准备脚本

脚本已自动生成: [浏览器自动采集脚本.js](浏览器自动采集脚本.js)

**脚本说明:**
- ✅ 包含所有 77 篇笔记
- ✅ 自动遍历每篇笔记
- ✅ 自动提取真实内容
- ✅ 自动过滤虚假内容
- ✅ 每 5 篇保存一次进度
- ✅ 自动下载数据文件

### 第 2 步:执行脚本

1. **打开小红书网站**并登录
   - 访问: https://www.xiaohongshu.com
   - 确保已登录

2. **打开浏览器 Console**
   - Windows: 按 **F12**
   - Mac: 按 **Option + Command + J**
   - 切换到 **Console** 标签

3. **复制粘贴脚本**
   - 打开 [浏览器自动采集脚本.js](浏览器自动采集脚本.js)
   - **全选**(Ctrl+A)并**复制**(Ctrl+C)
   - 在 Console 中**粘贴**(Ctrl+V)
   - 按**回车**执行

### 第 3 步:等待完成

脚本会自动:
1. 📖 遍历所有 77 篇笔记
2. ⏳ 每篇等待 3-5 秒加载
3. 📝 提取标题、内容、作者等信息
4. ✅ 自动过滤"用户协议"等虚假内容
5. 💾 每 5 篇保存进度
6. 📁 完成后自动下载数据文件

**预计时间:** 5-10 分钟

---

## 📊 采集过程示例

Console 会显示类似:

```
═══════════════════════════════════════
📝 小红书笔记批量采集工具
═══════════════════════════════════════

📚 待采集笔记数: 77
⏳ 开始采集... (预计需要 5-10 分钟)

[1/77] 正在采集: 生产后1—3天，老公如何照顾孕妇
   ✅ 成功! (1234 字符)
[2/77] 正在采集: 无标题
   ✅ 成功! (567 字符)
   💾 进度已保存 (5/77)
[3/77] 正在采集: 孕期每个月身体感受+注意事项+营养补充✅
   ✅ 成功! (2345 字符)
...

═══════════════════════════════════════
✅ 采集完成!
═══════════════════════════════════════

📊 统计:
   - 总笔记数: 77
   - 成功采集: 65 ✅
   - 失败/虚假: 12 ⚠️

📁 文件已开始下载: xhs-notes-2026-01-12.json
```

---

## 📥 采集完成后

### 1. 下载数据

浏览器会自动下载文件: `xhs-notes-2026-01-12.json`

### 2. 复制到项目

将下载的文件复制到项目的 `data/` 目录,重命名为:

```bash
data/notes-extracted.json
```

### 3. 生成文档

运行命令生成最终文档:

```bash
node scripts/generate-final-doc.js
```

---

## 💡 高级功能

### 暂停和恢复

脚本每 5 篇会保存进度到 `sessionStorage`

如果需要中断:
1. **刷新页面**即可停止
2. 重新运行脚本会从头开始(如需断点续传,可以修改脚本)

### 查看实时进度

在 Console 中输入:

```javascript
JSON.parse(sessionStorage.getItem('xhs_collect_progress'))
```

### 手动下载

如果自动下载失败,数据已保存到剪贴板:

1. 在 Console 运行完脚本后
2. 按 **Ctrl+V** 粘贴到记事本
3. 保存为 `.json` 文件

---

## ⚠️ 注意事项

1. **保持页面在前台**
   - 不要最小化浏览器
   - 不要切换到其他标签页

2. **不要手动操作**
   - 脚本运行时不要点击页面
   - 不要导航到其他页面

3. **网络稳定**
   - 确保网络连接稳定
   - 如果加载失败会自动重试

4. **登录状态**
   - 确保已登录小红书
   - 如果 Cookie 失效,需要重新登录

---

## 🎯 完成后

采集完成后,你会得到:

✅ **JSON 文件** - 包含所有笔记的完整数据
- 标题
- 内容(真实内容,非"用户协议")
- 作者
- 点赞数
- 图片链接
- 采集时间

✅ **可以直接使用**
- 导入到数据库
- 生成 Markdown 文档
- 数据分析
- 打印成 PDF

---

## 🔧 如果遇到问题

### 问题 1: 脚本无法复制

**解决:** 使用 VSCode 打开 [浏览器自动采集脚本.js](浏览器自动采集脚本.js)
- 全选: Ctrl+A
- 复制: Ctrl+C

### 问题 2: 自动下载失败

**解决:** 数据已保存到剪贴板
- 粘贴到记事本
- 保存为 `.json` 文件

### 问题 3: 采集中断

**解决:** 重新运行脚本即可
- 进度保存在 `sessionStorage`
- 刷新页面会清空进度

### 问题 4: 显示"未登录"

**解决:**
1. 刷新页面
2. 重新登录小红书
3. 再次运行脚本

---

## ✨ 优势

对比其他方案:

| 方案 | 时间 | 操作 | 成功率 |
|------|------|------|--------|
| **浏览器脚本** | 5-10分钟 | 1次 | ✅ 95%+ |
| 手动复制 | 2-3小时 | 77次 | ✅ 100% |
| Puppeteer爬虫 | 10-20分钟 | 需调试 | ⚠️ 50% |

---

## 🚀 立即开始

1. 打开 [浏览器自动采集脚本.js](浏览器自动采集脚本.js)
2. 全选复制
3. 在小红书页面的 Console 粘贴
4. 回车执行
5. 等待完成 ✅

**就这么简单!** 🎉
